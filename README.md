# WriteSpace Backend API

> A robust, scalable backend for a modern blogging platform.

## ğŸš€ Overview

WriteSpace is a RESTful API built with **Node.js** and **TypeScript**, designed to power a professional blogging platform. It supports advanced features like role-based authentication, rich content management, social interactions (likes, comments, shares), and asynchronous notifications.

## ğŸ› ï¸ Tech Stack

- **Runtime**: Node.js (v18+)
- **Framework**: Express.js
- **Language**: TypeScript
- **Database**: MongoDB (Mongoose)
- **Caching & Queues**: Redis, BullMQ
- **Authentication**: Passport.js, JWT
- **Documentation**: Swagger (OpenAPI), TypeDoc
- **Testing**: Jest, Supertest

## ğŸ“‚ Project Structure

```
writespace/
â”œâ”€â”€ .github/                   # CI/CD Workflows (GitHub Actions)
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ test.yml           # Runs tests on Pull Request
â”‚       â””â”€â”€ deploy.yml         # Deploys to AWS/DigitalOcean
â”‚
â”œâ”€â”€ .vscode/                   # VS Code settings (optional but good for teams)
â”‚   â””â”€â”€ settings.json
â”‚
â”œâ”€â”€ dist/                      # Compiled JavaScript files (Generated by TypeScript)
â”‚
â”œâ”€â”€ docs/                      # Documentation
â”‚   â””â”€â”€ swagger.yaml           # OpenAPI Specification (optional if using JSDoc)
â”‚
â”œâ”€â”€ logs/                      # Local logs (error.log, combined.log)
â”‚   â””â”€â”€ .keep
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/                # Global Configurations
â”‚   â”‚   â”œâ”€â”€ db.ts              # MongoDB Connection Logic
â”‚   â”‚   â”œâ”€â”€ redis.ts           # Redis Client Setup
â”‚   â”‚   â”œâ”€â”€ env.ts             # Environment Variable Validation (Joi/Zod)
â”‚   â”‚   â”œâ”€â”€ swagger.ts         # Swagger JSDoc Setup
â”‚   â”‚   â””â”€â”€ logger.ts          # Winston/Pino Logger Setup
â”‚   â”‚
â”‚   â”œâ”€â”€ modules/               # VERTICAL SLICES (Feature Based)
â”‚   â”‚   â”œâ”€â”€ auth/              # Authentication Feature
â”‚   â”‚   â”‚   â”œâ”€â”€ dtos/          # Data Transfer Objects (Validation)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login.dto.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ register.dto.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ verify-otp.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ interfaces/    # TypeScript Interfaces
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth.interface.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.controller.ts  # HTTP Request Handler
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts     # Business Logic
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.routes.ts      # API Routes definition
â”‚   â”‚   â”‚   â””â”€â”€ auth.utils.ts       # Helper (e.g., JWT Generator)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ users/             # User Management
â”‚   â”‚   â”‚   â”œâ”€â”€ dtos/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ update-profile.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ interfaces/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ user.interface.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ users.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ users.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ users.routes.ts
â”‚   â”‚   â”‚   â””â”€â”€ users.model.ts      # Mongoose Schema
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ posts/             # Blog Posts
â”‚   â”‚   â”‚   â”œâ”€â”€ dtos/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-post.dto.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ update-post.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ interfaces/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ post.interface.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ posts.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ posts.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ posts.routes.ts
â”‚   â”‚   â”‚   â””â”€â”€ posts.model.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ interactions/      # Likes, Shares, Comments
â”‚   â”‚   â”‚   â”œâ”€â”€ dtos/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ add-comment.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ interfaces/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ like.interface.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ comment.interface.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ interactions.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ interactions.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ interactions.routes.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ likes.model.ts
â”‚   â”‚   â”‚   â””â”€â”€ comments.model.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ notifications/     # Email & SMS Service
â”‚   â”‚       â”œâ”€â”€ interfaces/
â”‚   â”‚       â”‚   â””â”€â”€ email.interface.ts
â”‚   â”‚       â”œâ”€â”€ email.service.ts    # SendGrid/AWS SES Logic
â”‚   â”‚       â”œâ”€â”€ sms.service.ts      # Twilio Logic
â”‚   â”‚       â””â”€â”€ templates/          # HTML Email Templates
â”‚   â”‚           â”œâ”€â”€ welcome.html
â”‚   â”‚           â””â”€â”€ otp.html
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                # Code shared across modules
â”‚   â”‚   â”œâ”€â”€ constants/         # Magic Strings/Numbers
â”‚   â”‚   â”‚   â””â”€â”€ http-codes.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ infra/             # External Services Wrappers
â”‚   â”‚   â”‚   â””â”€â”€ mailer.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ middlewares/       # Express Middlewares
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.middleware.ts     # JWT Verification
â”‚   â”‚   â”‚   â”œâ”€â”€ error.middleware.ts    # Global Error Handler
â”‚   â”‚   â”‚   â”œâ”€â”€ validate.middleware.ts # Request Body Validator
â”‚   â”‚   â”‚   â”œâ”€â”€ rate-limit.middleware.ts # Prevent DDoS
â”‚   â”‚   â”‚   â””â”€â”€ upload.middleware.ts   # Multer (Image Uploads)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ queues/            # Message Queue Producers/Consumers
â”‚   â”‚   â”‚   â”œâ”€â”€ email.queue.ts       # Defines the Queue
â”‚   â”‚   â”‚   â”œâ”€â”€ email.worker.ts      # Processes the Queue
â”‚   â”‚   â”‚   â””â”€â”€ interaction.queue.ts # Handles "Likes"
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/             # Helper Functions
â”‚   â”‚   â”‚   â”œâ”€â”€ api-response.ts      # Standard Success Response
â”‚   â”‚   â”‚   â”œâ”€â”€ app-error.ts         # Standard Error Class
â”‚   â”‚   â”‚   â””â”€â”€ catch-async.ts       # Try-Catch Wrapper
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ types/             # Global TypeScript Types
â”‚   â”‚       â””â”€â”€ express.d.ts     # Extending Express Request (req.user)
â”‚   â”‚
â”‚   â”œâ”€â”€ app.ts                 # Express Application Setup (Middleware)
â”‚   â””â”€â”€ server.ts              # Entry Point (Server Listener)
â”‚
â”œâ”€â”€ tests/                     # Unit & Integration Tests
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ auth.service.test.ts
â”‚   â”‚   â””â”€â”€ posts.service.test.ts
â”‚   â””â”€â”€ integration/
â”‚       â”œâ”€â”€ auth.routes.test.ts
â”‚       â””â”€â”€ posts.routes.test.ts
â”‚
â”œâ”€â”€ .dockerignore              # Files to ignore in Docker
â”œâ”€â”€ .env.example               # Template for environment variables
â”œâ”€â”€ .eslintrc.json             # Linting Rules
â”œâ”€â”€ .gitignore                 # Git Ignore
â”œâ”€â”€ .prettierrc                # Formatting Rules
â”œâ”€â”€ docker-compose.yml         # Run Redis/Mongo/App locally
â”œâ”€â”€ Dockerfile                 # For building the production image
â”œâ”€â”€ jest.config.ts             # Testing Configuration
â”œâ”€â”€ nodemon.json               # Auto-restart config
â”œâ”€â”€ package.json               # Dependencies
â”œâ”€â”€ README.md                  # Project Documentation
â””â”€â”€ tsconfig.json              # TypeScript Configuration
```

## âš¡ Getting Started

### Prerequisites

- Node.js & npm
- MongoDB
- Redis

### Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/Afzal14786/writespace.git
   cd writespace
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Configure Environment**
   Create a `.env` file in the root directory (copy `.env.example`).
   ```env
   PORT=5000
   MONGO_URI=mongodb://localhost:27017/WriteSpace
   REDIS_URL=redis://localhost:6379
   JWT_SECRET=your_jwt_secret
   CLIENT_URL=http://localhost:3000
   ```

4. **Run Development Server**
   ```bash
   npm run dev
   ```

## ğŸ§ª Testing

Run the test suite:

```bash
# Run all tests
npm test

# Run tests with coverage
npm run test:cov
```

## ğŸ“– Documentation

- **API Docs**: Run `npm run docs` to generate API reference in `docs/api`.
- **User Guide**: See `docs/user-guide/getting-started.md`.

## ğŸ“œ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
